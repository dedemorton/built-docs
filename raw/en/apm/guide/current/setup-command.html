<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>setup command | APM User Guide [master] | Elastic</title>
<link rel="home" href="index.html" title="APM User Guide [master]"/>
<link rel="up" href="command-line-options.html" title="APM Server command reference"/>
<link rel="prev" href="run-command.html" title="run command"/>
<link rel="next" href="test-command.html" title="test command"/>
<meta name="DC.type" content="Learn/Docs/APM Guide/master"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="master"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">APM User Guide [master]</a></span>
»
<span class="breadcrumb-link"><a href="apm-server.html">Legacy APM Server Reference</a></span>
»
<span class="breadcrumb-link"><a href="setting-up-and-running.html">Set up APM Server</a></span>
»
<span class="breadcrumb-link"><a href="command-line-options.html">APM Server command reference</a></span>
»
<span class="breadcrumb-node"><code class="literal">setup</code> command</span>
</div>
<div class="navheader">
<span class="prev">
<a href="run-command.html">« <code class="literal">run</code> command</a>
</span>
<span class="next">
<a href="test-command.html"><code class="literal">test</code> command »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="setup-command"></a><code class="literal">setup</code> command<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/legacy/copied-from-beats/docs/command-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>Sets up the initial environment, including the ES index template, and ILM policy and write alias</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The index template ensures that fields are mapped correctly in Elasticsearch.
If index lifecycle management is enabled it also ensures that the defined ILM policy
and write alias are connected to the indices matching the index template.
The ILM policy takes care of the lifecycle of an index, when to do a rollover,
when to move an index from the hot phase to the next phase, etc.
</li>
</ul>
</div>
<p>This command sets up the environment without actually running
APM Server and ingesting data.</p>
<p><span class="strong strong"><strong>SYNOPSIS</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">apm-server setup [FLAGS]</pre>
</div>
<p><span class="strong strong"><strong>FLAGS</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">-h, --help</code></strong></span>
</span>
</dt>
<dd>
Shows help for the <code class="literal">setup</code> command.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">--index-management</code></strong></span>
</span>
</dt>
<dd>
Sets up components related to Elasticsearch index management including
template, ILM policy, and write alias (if supported and configured).
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">--pipelines</code></strong></span>
</span>
</dt>
<dd>
Registers the <a class="xref" href="configuring-ingest-node.html" title="Parse data using ingest node pipelines">pipeline</a> definitions set in <code class="literal">ingest/pipeline/definition.json</code>.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">--template</code></strong></span>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.2</span>]
<span class="Admonishment-detail">
Deprecated in 7.2.
</span>
</span>
Sets up the index template only.
It is recommended to use <code class="literal">--index-management</code> instead.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">--ilm-policy</code></strong></span>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.2</span>]
<span class="Admonishment-detail">
Deprecated in 7.2.
</span>
</span>
Sets up the index lifecycle management policy.
It is recommended to use <code class="literal">--index-management</code> instead.
</dd>
</dl>
</div>
<p>Also see <a class="xref" href="version-command.html#global-flags" title="Global flags">Global flags</a>.</p>
<p><span class="strong strong"><strong>EXAMPLES</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">apm-server setup --index-management
apm-server setup --pipelines</pre>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="run-command.html">« <code class="literal">run</code> command</a>
</span>
<span class="next">
<a href="test-command.html"><code class="literal">test</code> command »</a>
</span>
</div>
</div>
</body>
</html>
